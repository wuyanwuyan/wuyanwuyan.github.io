{"version":3,"sources":["/Users/apple/codes/dataVision-dui/src/Text/ScrollData/ScrollData.jsx","/Users/apple/codes/dataVision-dui/src/Text/ScrollData/index.js","/Users/apple/codes/dataVision-dui/src/Text/ScrollData/example/Basic.mdx"],"names":["DataScroller","props","update","anim","root","current","target","animatables","lastChild","offsetTop","offsetHeight","animateNext","data","length","top","gap","div","createDivChild","style","divHeight","anime","targets","easing","duration","speed","complete","parentNode","removeChild","document","createElement","oneData","getOneData","propName","innerText","formatDataFun","className","cx","textClassName","textStyle","appendChild","index","React","createRef","this","prevProps","prevState","snapshot","remove","querySelectorAll","ref","PureComponent","defaultProps","JSON","stringify","ScrollData","layoutProps","MDXContent","components","mdxType","parentName","__position","__code","__scope","Playground","width","height","border","marginTop","isMDXComponent"],"mappings":"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","file":"static/js/src-text-scroll-data-example-basic.82e621a1.js","sourcesContent":["import React from 'react'\nimport cx from 'classnames'\nimport PropTypes from 'prop-types'\nimport anime from 'animejs'\nimport './style.scss'\n\nexport default class DataScroller extends React.PureComponent {\n  static propTypes = {\n    data: PropTypes.array.isRequired,\n    duration: PropTypes.number,\n    formatDataFun: PropTypes.func,\n    gap: PropTypes.number\n  }\n\n  static defaultProps = {\n    data: [{\n      'date_num': 92633,\n      'data_quality': '0.889',\n      'data_source': '永泰县中医院',\n      'span_date': '2009/05/13 11:00至2018/01/28 8:00'\n    }],\n    duration: 5000,\n    formatDataFun: JSON.stringify,\n    gap: 5,\n    style: {}\n  }\n\n  constructor (props) {\n    super(props)\n    this.speed = 1\n    this.index = 0\n\n    this.root = React.createRef()\n  }\n\n  componentDidMount () {\n    // this.fillData()\n    const root = this.root.current\n    this.speed = root.offsetHeight / this.props.duration\n    this.animateNext()\n  }\n\n  componentDidUpdate (prevProps, prevState, snapshot) {\n    if (prevProps.data !== this.props.data) {\n      this.index = 0\n      this.animateNext()\n    }\n  }\n\n  componentWillUnmount () {\n    const root = this.root.current\n    anime.remove(root.querySelectorAll('.dui-scroll-data-cnt'))\n  }\n\n  update = anim => {\n    const root = this.root.current\n    const target = anim.animatables[0].target\n    let lastChild = root.lastChild\n    if (lastChild !== target) return\n    if (lastChild.offsetTop + lastChild.offsetHeight < root.offsetHeight) {\n      this.animateNext()\n    }\n  }\n\n  animateNext = () => {\n    const props = this.props\n    if (!props.data || props.data.length === 0) return\n    const root = this.root.current\n    let lastChild = root.lastChild\n    let top = 0\n    if (lastChild) {\n      top = lastChild.offsetTop + lastChild.offsetHeight + props.gap\n      if (lastChild.offsetTop + lastChild.offsetHeight > root.offsetHeight) {\n        return\n      }\n    }\n    const div = this.createDivChild()\n    div.style.top = top + 'px'\n    const divHeight = div.offsetHeight\n    anime({\n      targets: div,\n      top: -divHeight,\n      easing: 'linear',\n      duration: (divHeight + top) / this.speed,\n      update: this.update,\n      complete: () => {\n        div.parentNode.removeChild(div)\n      }\n    })\n  }\n\n  createDivChild = () => {\n    const root = this.root.current\n    const props = this.props\n    const div = document.createElement('div')\n    let oneData = this.getOneData()\n    div.innerText = typeof oneData === 'string' ? oneData : props.formatDataFun(oneData)\n    div.className = cx('dui-scroll-data-cnt', props.textClassName)\n    for (let propName in props.textStyle || {}) {\n      div.style[propName] = props.textStyle[propName]\n    }\n    root.appendChild(div)\n    return div\n  }\n\n  getOneData = () => {\n    let oneData = this.props.data[this.index]\n    this.index = this.index + 1 >= this.props.data.length ? 0 : this.index + 1\n    return oneData\n  }\n\n  render () {\n    const props = this.props\n    return (\n      <div ref={this.root} className={cx('dui-scroll-data', props.className)} style={props.style} />\n    )\n  }\n}\n","import ScrollData from './ScrollData'\n\nexport default ScrollData\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\nimport { Playground } from 'docz'\nimport ScrollData from '../index'\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2 {...{\n      \"id\": \"scrolldata-数组内容滚动\"\n    }}>{`ScrollData 数组内容滚动`}</h2>\n    <h2 {...{\n      \"id\": \"基本属性\"\n    }}>{`基本属性`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`属性名`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`描述`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`类型`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`默认值`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`必填项`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`data`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`数组对象`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`array`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`[]`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`是`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`duration`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`滚动持续时间`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`number`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`5000ms`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`是`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`gap`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`溢出滚动时，两个滚动内容的上下间距`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`number`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`5`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`style`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`根样式`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Object`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`否`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`className`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`根类名`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`String`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`否`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`textClassName`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`滚动文本的类名`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`String`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`textStyle`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`滚动文本的样式`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`object`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"代码演示\"\n    }}>{`代码演示`}</h2>\n    <Playground __position={0} __code={'<ScrollData style={{ width: 300, height: 260, border: \\'1px red solid\\' }} />\\n<ScrollData\\n  style={{ width: 400, height: 260, border: \\'1px red solid\\', marginTop: 10 }}\\n  data={[\\n    {\\n      date_num: 244301,\\n      data_quality: \\'0.929\\',\\n      data_source: \\'福州市第七医院\\',\\n      span_date: \\'2003/06/03 8:30至2018/1/2 8:40\\',\\n    },\\n    {\\n      date_num: 1828921,\\n      data_quality: \\'0.929\\',\\n      data_source: \\'福州市第二医院\\',\\n      span_date: \\'2008/6/1 04:03至2017/10/28 11:57\\',\\n    },\\n    {\\n      date_num: 92633,\\n      data_quality: \\'0.889\\',\\n      data_source: \\'永泰县中医院\\',\\n      span_date: \\'2009/05/13 11:00至2018/01/28 8:00\\',\\n    },\\n    {\\n      date_num: 8918,\\n      data_quality: \\'0.929\\',\\n      data_source: \\'福州神经精神病防治院\\',\\n      span_date: \\'2002/5/22 14:31至2010/12/31 11:33\\',\\n    },\\n    {\\n      date_num: 346559,\\n      data_quality: \\'0.929\\',\\n      data_source: \\'福建省永泰县医院\\',\\n      span_date: \\'2012/12/31 11:00至2018/01/30 8:00\\',\\n    },\\n    {\\n      date_num: 301964,\\n      data_quality: \\'0.929\\',\\n      data_source: \\'福建省福州儿童医院\\',\\n      span_date: \\'2008/06/01 8:30至2018/1/01 9:40\\',\\n    },\\n    {\\n      date_num: 850949,\\n      data_quality: \\'0.929\\',\\n      data_source: \\'福建省福州结核病防治院\\',\\n      span_date: \\'2001/5/22 8:31至2017/03/30 11:33\\',\\n    },\\n  ]}\\n/>'} __scope={{\n      props: this ? this.props : props,\n      Playground,\n      ScrollData\n    }} mdxType=\"Playground\">\n      <ScrollData style={{\n        width: 300,\n        height: 260,\n        border: '1px red solid'\n      }} mdxType=\"ScrollData\" />\n      <ScrollData style={{\n        width: 400,\n        height: 260,\n        border: '1px red solid',\n        marginTop: 10\n      }} data={[{\n        \"date_num\": 244301,\n        \"data_quality\": \"0.929\",\n        \"data_source\": \"福州市第七医院\",\n        \"span_date\": \"2003/06/03 8:30至2018/1/2 8:40\"\n      }, {\n        \"date_num\": 1828921,\n        \"data_quality\": \"0.929\",\n        \"data_source\": \"福州市第二医院\",\n        \"span_date\": \"2008/6/1 04:03至2017/10/28 11:57\"\n      }, {\n        \"date_num\": 92633,\n        \"data_quality\": \"0.889\",\n        \"data_source\": \"永泰县中医院\",\n        \"span_date\": \"2009/05/13 11:00至2018/01/28 8:00\"\n      }, {\n        \"date_num\": 8918,\n        \"data_quality\": \"0.929\",\n        \"data_source\": \"福州神经精神病防治院\",\n        \"span_date\": \"2002/5/22 14:31至2010/12/31 11:33\"\n      }, {\n        \"date_num\": 346559,\n        \"data_quality\": \"0.929\",\n        \"data_source\": \"福建省永泰县医院\",\n        \"span_date\": \"2012/12/31 11:00至2018/01/30 8:00\"\n      }, {\n        \"date_num\": 301964,\n        \"data_quality\": \"0.929\",\n        \"data_source\": \"福建省福州儿童医院\",\n        \"span_date\": \"2008/06/01 8:30至2018/1/01 9:40\"\n      }, {\n        \"date_num\": 850949,\n        \"data_quality\": \"0.929\",\n        \"data_source\": \"福建省福州结核病防治院\",\n        \"span_date\": \"2001/5/22 8:31至2017/03/30 11:33\"\n      }]} mdxType=\"ScrollData\" />\n    </Playground>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"],"sourceRoot":""}