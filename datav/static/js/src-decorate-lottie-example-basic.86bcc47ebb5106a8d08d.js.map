{"version":3,"sources":["/Users/apple/codes/dataVision-dui/src/Decorate/Lottie/Lottie.jsx","/Users/apple/codes/dataVision-dui/src/Decorate/Lottie/index.js","/Users/apple/codes/dataVision-dui/src/Decorate/Lottie/example/Basic.mdx"],"names":["Lottie","props","destroy","animation","clearTimeout","timerKey","startAnimation","state","errMsg","setState","window","fetch","jsonUrl","then","res","json","animationData","lottie","loadAnimation","container","root","current","renderer","loop","autoplay","setSpeed","speed","animationDelay","play","setTimeout","onInitAnimation","e","loading","React","createRef","require","this","prevProps","prevState","snapshot","ref","className","cx","err","style","Component","defaultProps","f","layoutProps","MDXContent","components","mdxType","parentName","__position","__code","__scope","Playground","isMDXComponent"],"mappings":"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","file":"static/js/src-decorate-lottie-example-basic.8c3b515c.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport cx from 'classnames'\nimport './style.scss'\n\nexport default class Lottie extends React.Component {\n  static propTypes = {\n    jsonUrl: PropTypes.string.isRequired,\n    speed: PropTypes.number\n  }\n\n  static defaultProps = {\n    jsonUrl: 'https://cec-1256174840.cos.ap-shanghai.myqcloud.com/427-happy-birthday.json',\n    speed: 1,\n    animationDelay: 0,\n    autoplay: true,\n    renderer: 'svg',\n    onInitAnimation: f => f\n  }\n\n  constructor (props) {\n    super(props)\n    this.state = {\n      loading: true,\n      errMsg: null\n    }\n    this.lottie = null\n    this.animation = null\n    this.timerKey = null\n    this.root = React.createRef()\n  }\n\n  componentDidMount () {\n    // import(/* webpackChunkName: \"[lottie]\" */'lottie-web').then(lottie => {\n    //   this.lottie = lottie\n    //   this.startAnimation()\n    // })\n\n    // lottie 文件较大，这边异步加载\n    require.ensure([], (require) => {\n      this.lottie = require('lottie-web')\n      this.startAnimation()\n    }, 'lottie')\n  }\n\n  componentWillUnmount () {\n    this.destroy()\n  }\n\n  destroy = () => {\n    if (this.animation) {\n      clearTimeout(this.timerKey)\n      this.animation.destroy()\n      this.animation = null\n    }\n  }\n\n  startAnimation = () => {\n    const props = this.props\n    this.state.errMsg && this.setState({ errMsg: null })\n    window.fetch(props.jsonUrl).then(res => res.json()).then(animationData => {\n      this.destroy()\n      this.animation = this.lottie.loadAnimation({\n        container: this.root.current,\n        renderer: props.renderer,\n        loop: true,\n        autoplay: false,\n        animationData\n      })\n      this.animation.setSpeed(props.speed)\n\n      if (props.autoplay) {\n        if (props.animationDelay <= 0) {\n          this.animation.play()\n        } else {\n          this.timerKey = setTimeout(() => {\n            this.animation.play()\n          }, props.animationDelay)\n        }\n      }\n      props.onInitAnimation(this.animation)\n    }).catch(e => {\n      this.setState({ errMsg: 'json加载失败，请检查链接' })\n    })\n  }\n\n  componentDidUpdate (prevProps, prevState, snapshot) {\n    if (prevProps.jsonUrl !== this.props.jsonUrl) {\n      this.startAnimation()\n    }\n  }\n\n  render () {\n    const { props, state } = this\n    return <div\n      ref={this.root}\n      className={cx('dui-lottie', { err: state.errMsg }, props.className)}\n      style={props.style}\n    >\n      {\n        !!state.errMsg && state.errMsg\n      }\n    </div>\n  }\n}\n","import Lottie from './Lottie'\n\nexport default Lottie\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\nimport { Playground } from 'docz'\nimport Lottie from '../index'\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2 {...{\n      \"id\": \"lottie\"\n    }}>{`Lottie`}</h2>\n    <p>{`Lottie 是 Airbnb 开源的一套跨平台的完整的动画效果解决方案，设计师可以使用 Adobe After Effects 设计出漂亮的动画之后，使用 Lottie 提供的 Bodymovin 插件将设计好的动画导出成 JSON 格式，就可以直接运用在 iOS、Android、Web 和 React Native之上，无需其他额外操作。`}</p>\n    <h2 {...{\n      \"id\": \"参考资料\"\n    }}>{`参考资料`}</h2>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://www.uisdc.com/lottie-dynamic-design-guide\"\n        }}>{`https://www.uisdc.com/lottie-dynamic-design-guide`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://airbnb.io/lottie/\"\n        }}>{`https://airbnb.io/lottie/`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://lottiefiles.com/?lang=zh_CN\"\n        }}>{`https://lottiefiles.com/?lang=zh_CN`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://zhuanlan.zhihu.com/p/104751997\"\n        }}>{`https://zhuanlan.zhihu.com/p/104751997`}</a></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"基本属性\"\n    }}>{`基本属性`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`属性名`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`描述`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`类型`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`默认值`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`必填项`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`jsonUrl`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`json的url`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`string`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`是`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`speed`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`播放速度`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`number`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`1`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`animationDelay`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`动画延迟多少毫秒播放`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`number`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`0`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`autoplay`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`是否自动播放`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`bool`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`true`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`renderer`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`渲染方式(svg或html或canvas)`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`string`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`svg`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`onInitAnimation`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`lottie动画对象初始化完成后的回调，onInitAnimation(lottieAnimation)`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`function`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`style`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`根结点style`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Object`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`className`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`根结点类名`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`string`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"基本使用\"\n    }}>{`基本使用`}</h2>\n    <Playground __position={0} __code={'<Lottie />\\n<Lottie\\n  jsonUrl=\\\"https://cec-1256174840.cos.ap-shanghai.myqcloud.com/72-favourite-app-icon.json\\\"\\n  renderer=\\\"canvas\\\"\\n  animationDelay={2000}\\n/>\\n<Lottie\\n  jsonUrl=\\\"https://cec-1256174840.cos.ap-shanghai.myqcloud.com/1055-world-locations.json\\\"\\n  speed={1.2}\\n/>'} __scope={{\n      props: this ? this.props : props,\n      Playground,\n      Lottie\n    }} mdxType=\"Playground\">\n    <Lottie mdxType=\"Lottie\" />\n    <Lottie jsonUrl='https://cec-1256174840.cos.ap-shanghai.myqcloud.com/72-favourite-app-icon.json' renderer='canvas' animationDelay={2000} mdxType=\"Lottie\" />\n    <Lottie jsonUrl='https://cec-1256174840.cos.ap-shanghai.myqcloud.com/1055-world-locations.json' speed={1.2} mdxType=\"Lottie\" />\n    </Playground>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"],"sourceRoot":""}