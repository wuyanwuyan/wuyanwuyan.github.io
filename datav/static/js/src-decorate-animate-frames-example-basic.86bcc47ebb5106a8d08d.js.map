{"version":3,"sources":["/Users/apple/codes/dataVision-dui/src/Decorate/AnimateFrames/AnimateFrames.jsx","/Users/apple/codes/dataVision-dui/src/Decorate/AnimateFrames/index.jsx","/Users/apple/codes/dataVision-dui/src/Decorate/AnimateFrames/example/Basic.mdx","/Users/apple/codes/dataVision-dui/src/lib/debounce.js"],"names":["AnimateFrames","props","state","frameIndex","imgWidth","undefined","imgTransform","frameStep","this","frameCount","duration","alternate","rootWidth","ReactDom","findDOMNode","offsetWidth","setState","segPercent","toFixed","timerKey","setInterval","newFrameIndex","newFrameStep","clearInterval","imgStyle","width","transform","className","cx","style","src","React","PureComponent","defaultProps","layoutProps","MDXContent","components","mdxType","parentName","__position","__code","__scope","Playground","maxWidth","height","isMDXComponent","debounce","func","timeout","wait","immediate","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout"],"mappings":"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","file":"static/js/src-decorate-animate-frames-example-basic.1518570b.js","sourcesContent":["import React from 'react'\nimport ReactDom from 'react-dom'\nimport PropType from 'prop-types'\nimport cx from 'classnames'\nimport debounce from '../../lib/debounce'\nimport './style.scss'\n\nexport default class AnimateFrames extends React.PureComponent {\n  static propTypes = {\n    src: PropType.string.isRequired,\n    frameCount: PropType.number.isRequired,\n    duration: PropType.number.isRequired\n  }\n\n  static defaultProps = {\n    frameCount: 6,\n    duration: 3000,\n    alternate: false\n  }\n\n  constructor (props) {\n    super(props)\n    this.state = {\n      frameIndex: 0,\n      imgWidth: undefined,\n      imgTransform: 'translateX(0)',\n      frameStep: 1\n    }\n  }\n\n  componentDidMount () {\n    const { frameCount, duration, alternate } = this.props\n\n    const root = ReactDom.findDOMNode(this)\n    const rootWidth = root.offsetWidth\n\n    this.setState({ imgWidth: frameCount * rootWidth })\n\n    let segPercent = (100 / frameCount).toFixed(2)\n\n    this.timerKey = setInterval(() => {\n      let {frameIndex, frameStep} = this.state\n      let newFrameIndex = frameIndex + frameStep\n      let newFrameStep = frameStep\n\n      // 双向交替播放\n      if (alternate) {\n        if (frameStep > 0 && newFrameIndex >= frameCount) {\n          newFrameIndex = frameIndex - 1\n          newFrameStep = -1\n        } else if (frameStep < 0 && newFrameIndex < 0) {\n          newFrameIndex = 1\n          newFrameStep = 1\n        }\n      } else {\n        newFrameIndex = newFrameIndex >= frameCount ? 0 : newFrameIndex\n      }\n\n      this.setState({\n        frameStep: newFrameStep,\n        frameIndex: newFrameIndex,\n        imgTransform: `translateX(-${segPercent * newFrameIndex}%)`\n      })\n    }, duration / frameCount)\n\n    // this.observer = new window.ResizeObserver(debounce(entries => {\n    //   entries.forEach((entry) => {\n    //     const rootWidth = entry.target.offsetWidth\n    //     this.setState({ imgWidth: frameCount * rootWidth })\n    //   })\n    // }))\n    // this.observer.observe(root)\n  }\n\n  componentWillUnmount () {\n    clearInterval(this.timerKey)\n    // this.observer.disconnect()\n    // this.observer = null\n  }\n\n  render () {\n    const { props, state } = this\n    const imgStyle = {\n      width: state.imgWidth,\n      transform: state.imgTransform\n    }\n    return (\n      <div className={cx('dui-animate-frames', props.className)} style={props.style}>\n        <img style={imgStyle} className='dui-animate-frames-img' src={props.src} />\n      </div>\n    )\n  }\n}\n","import AnimateFrames from './AnimateFrames'\n\nexport default AnimateFrames\n","\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\n\n/* @jsx mdx */\nimport { Playground } from 'docz'\nimport AnimateFrames from '../index'\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2 {...{\n      \"id\": \"animateframes\"\n    }}>{`AnimateFrames`}</h2>\n    <p>{`图片帧动画组件，循环播放`}</p>\n    <h2 {...{\n      \"id\": \"基本属性\"\n    }}>{`基本属性`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`属性名`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`描述`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`类型`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`默认值`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`必填项`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`src`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`素材图片地址`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`string`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`是`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`frameCount`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`帧数`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`number`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`6`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`是`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`duration`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`动画持续时间`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`number`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`3000(毫秒)`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`alternate`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`是否开启双向交替循环播放`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`boolean`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`false`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`style`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`根结点style`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`Object`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`className`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`根结点类名`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}>{`string`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n          <td parentName=\"tr\" {...{\n            \"align\": \"center\"\n          }}></td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"基本使用\"\n    }}>{`基本使用`}</h2>\n    <Playground __position={0} __code={'<img\\n  style={{ maxWidth: \\'100%\\' }}\\n  src=\\\"http://largescreen-57907.oss-cn-shenzhen.aliyuncs.com/capguy-walk.png\\\"\\n/>\\n<AnimateFrames\\n  style={{ width: 184, height: 325 }}\\n  frameCount={8}\\n  duration={1200}\\n  src=\\\"https://cec-1256174840.cos.ap-shanghai.myqcloud.com/capguy-walk.png\\\"\\n/>\\n<br />\\n<img\\n  style={{ maxWidth: \\'100%\\' }}\\n  src=\\\"https://s1.hdslb.com/bfs/static/jinkela/home/asserts/app-download.png\\\"\\n/>\\n<AnimateFrames\\n  alternate\\n  style={{ width: 80, height: 80 }}\\n  frameCount={16}\\n  src=\\\"https://s1.hdslb.com/bfs/static/jinkela/home/asserts/app-download.png\\\"\\n/>'} __scope={{\n      props: this ? this.props : props,\n      Playground,\n      AnimateFrames\n    }} mdxType=\"Playground\">\n    <img style={{\n        maxWidth: '100%'\n      }} src='http://largescreen-57907.oss-cn-shenzhen.aliyuncs.com/capguy-walk.png' />\n    <AnimateFrames style={{\n        width: 184,\n        height: 325\n      }} frameCount={8} duration={1200} src='https://cec-1256174840.cos.ap-shanghai.myqcloud.com/capguy-walk.png' mdxType=\"AnimateFrames\" />\n    <br />\n    <img style={{\n        maxWidth: '100%'\n      }} src='https://s1.hdslb.com/bfs/static/jinkela/home/asserts/app-download.png' />\n    <AnimateFrames alternate style={{\n        width: 80,\n        height: 80\n      }} frameCount={16} src='https://s1.hdslb.com/bfs/static/jinkela/home/asserts/app-download.png' mdxType=\"AnimateFrames\" />\n    </Playground>\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;","// Credit David Walsh (https://davidwalsh.name/javascript-debounce-function)\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\nexport default function debounce (func, wait = 250, immediate = false) {\n  var timeout\n\n  return function executedFunction () {\n    var context = this\n    var args = arguments\n\n    var later = function () {\n      timeout = null\n      if (!immediate) func.apply(context, args)\n    }\n\n    var callNow = immediate && !timeout\n\n    clearTimeout(timeout)\n\n    timeout = setTimeout(later, wait)\n\n    if (callNow) func.apply(context, args)\n  }\n}\n"],"sourceRoot":""}